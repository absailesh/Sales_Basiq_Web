
<div class="main-container" >
    <!-- <app-loader *ngIf="loader"></app-loader> -->
    <div class="tools-container">
        <a mat-icon-button  matTooltip="Back" (click)="back()">
            <i class="material-icons">arrow_back</i>
        </a>
        <h2>Product Details</h2>
        
        <div class="left-auto" *ngIf="logined_user_data.edit_master=='1'">
            <button matTooltip="Edit product" *ngIf="logined_user_data.edit_master=='1'" [routerLink]="['add-product/', product_id]"  mat-raised-button color="primary"><i class="material-icons">edit</i> Edit product</button>
        </div>
    </div>
    
    <div class="container pt10 pl10 pr10 pb50" >
        <div class="row">
            <div class="col s12 m12 l8">
                <!-- product data start -->
                <div class="card" *ngIf="!skLoading">
                    <div class="card-head">
                        <h2>Basic Details</h2>
                    </div>
                    <div class="card-body">
                        <div class="grid-box">
                            <div class="block-feilds">
                                <span>Date Created</span>
                                <p>{{getData.date_created | date}}</p>
                            </div>
                            
                            <div class="block-feilds">
                                <span>Segment</span>
                                <p>{{getData.category}}</p>
                            </div>
                            
                            <div class="block-feilds">
                                <span>Name</span>
                                <p>{{getData.product_name}}</p>
                            </div>
                            
                            <div class="block-feilds">
                                <span>Code</span>
                                <p>{{getData.product_code}}</p>
                            </div>
                            
                            <div class="block-feilds">
                                <span>HSN Code</span>
                                <p>{{getData.hsn ? getData.hsn :'---'}}</p>
                            </div>
                            
                            <div class="block-feilds">
                                <span>Unit Of Measurement</span>
                                <p>{{getData.uom ? getData.uom :'---'}}</p>
                            </div>
                            
                            

                            <div class="block-feilds">
                                <span>Point Category</span>
                                <p>{{getData.point_category_name ? getData.point_category_name :'---'}}</p>
                            </div>


                            <div class="block-feilds">
                                <span>Master Packing Size</span>
                                <p>{{getData.master_packing_size ? getData.master_packing_size :'---'}}</p>
                            </div>
                            <!-- <div class="block-feilds">
                                <span>SKU Code</span>
                                <p>{{getData.sku_code ? getData.sku_code :'---'}}</p>
                            </div> -->
                            <div class="block-feilds">
                                <span>Pack QTY.</span>
                                <p>{{getData.qty ? getData.qty :'---'}} {{getData.uom}}</p>
                            </div>
                            <div class="block-feilds">
                                <span>MRP</span>
                                <p>{{getData.mrp ? ('&#x20B9;'+getData.mrp) :'---'}}</p>
                            </div>
                            <!-- <div class="block-feilds">
                                <span>DPL</span>
                                <p>{{getData.ddp ? ('&#x20B9;'+getData.ddp) :'---'}}</p>
                            </div> -->
                            <div class="block-feilds">
                                <span>Product Source</span>
                                <p>{{getData.product_source ? getData.product_source:'---'}}</p>
                            </div>
                            <!-- <div class="block-feilds">
                                <span>Hardner Code</span>
                                <p>{{getData.hardner_code ? getData.hardner_code :'---'}}</p>
                            </div> -->
                            <!-- <div class="block-feilds">
                                <span>Hardner Qty</span>
                                <p>{{getData.hardner_qty ? getData.hardner_qty :'---'}}</p>
                            </div> -->
                            <div class="block-feilds">
                                <span>Scanning</span>
                                <p>{{getData.product_scan ? getData.product_scan :'---'}}</p>
                            </div>
                            <div class="block-feilds">
                                <span>Status</span>
                                <p>{{getData.status == '1' ?  'Active' : "Inactive"}}</p>
                            </div>
                            
                            <div class="block-feilds">
                                <span>Last Updated By</span>
                                <p>{{getData.last_updated_by_name ? getData.last_updated_by_name : '--'}}</p>
                            </div>
                            
                            <div class="block-feilds">
                                <span>Last Updated On</span>
                                <p>
                                    {{getData.last_updated_on && getData.last_updated_on != '0000-00-00 00:00:00'? (getData.last_updated_on | date:'short') : '--'}}
                                </p>
                            </div>
                        </div>
                        
                        <div class="grid-box single mt16">
                            <div class="block-feilds">
                                <span>Description</span>
                                <p>{{getData.description ? getData.description:'--'}}</p>
                            </div>
                        </div>
                    </div>
                    
                    <ng-container *ngIf="getData.feature_apply == 'Yes'">
                        <div class="card-head mt16">
                            <h2>Features</h2>
                        </div>
                        
                        <div class="card-body">
                            <div class="cs-table left-right-10" >
                                <div class=" border-top">
                                    <div class="table-head">
                                        <table>
                                            <tr>
                                                <th class="w30 text-center"></th>
                                                <th>Feature</th>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                                
                                <div class="table-container pb0">
                                    <div class="table-content none-shadow">
                                        <table>
                                            <tr *ngFor="let row of getData.product_size_data; let i = index">
                                                <td class="w30 text-center">{{i+1}}</td>
                                                <td>{{row.product_size | titlecase}}</td>
                                            </tr>  
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-container>
                </div>
                <!-- product data end -->
                
                
                <!-- Skeleton start -->
                <div class="card" *ngIf="skLoading">
                    <div class="sk-head">
                        <h2>&nbsp;</h2>
                    </div>
                    <div class="card-body">
                        <div class="grid-box">
                            <div class="sk-box" *ngFor="let row of [].constructor(10)">
                                &nbsp;
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Skeleton end -->
                
            </div>
            <div class="col s12 m12 l4">
                <div class="card" *ngIf="!skLoading">
                    <div class="card-head">
                        <h2>Images</h2>
                    </div>
                    <div class="card-body">
                        <div class="img-container">
                            <div class="image-block" *ngFor="let row of getData.product_image_data ">
                                <img src="{{url+row.image}}">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Skeleton start -->
                <div class="card" *ngIf="skLoading">
                    <div class="sk-head">
                        <h2>&nbsp;</h2>
                    </div>
                    <div class="card-body">
                        <div class="img-container">
                            <div class="image-block sk-loading" *ngFor="let row of [].constructor(3)">
                                &nbsp; 
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Skeleton end -->
            </div>
        </div>


        <div class="row" *ngIf="stateDetail.length > 0 ">
            <div class="col s12 m12 l12">
                <div class="card">
                    <div class="card-head">
                        <h2>State Wise Price List</h2>
                    </div>
                    <div class="card-body">
                        <div class="cs-table left-right-10" >
                            <div class=" border-top">
                                <div class="table-head">
                                    <table>
                                        <tr>
                                            <th class="w30 text-center"></th>
                                            <th>State</th>
                                            <th class="padding0 w460">
                                                <table>
                                                    <tr>
                                                        <th class="w300" *ngIf="getData.feature_apply != 'No'">Feature</th>
                                                        <th class="text-right" [ngClass]="{'w100': getData.feature_apply == 'Yes'}">MRP</th>
                                                        <th class="W60 text-center" *ngIf="logined_user_data.edit_master=='1'">Action</th>
                                                    </tr>
                                                </table>
                                            </th>
                                        </tr>
                                        
                                        <tr>
                                            <th class="w30 text-center"></th>
                                            <th>&nbsp;</th>
                                            <th class="padding0 w460">
                                                <table>
                                                    <tr>
                                                        <th class="w300" *ngIf="getData.feature_apply != 'No'">
                                                            <div class="th-search-acmt" [ngClass]="{'error-block': featureFlag == true}" *ngIf="logined_user_data.edit_master=='1'">
                                                                <mat-form-field class="cs-input select-input">
                                                                    <mat-select name="product_size" id="Select Feature" placeholder="Select Feature" [(ngModel)]="state_data.product_size"  (selectionChange)="clearValidation()">
                                                                        <mat-option value="" disabled style="padding: 10px 20px;">Select</mat-option>
                                                                        <mat-option value="{{size.product_size}}" *ngFor="let size of productSize;let i=index;">{{size.product_size}}</mat-option>
                                                                    </mat-select>
                                                                </mat-form-field>
                                                            </div>
                                                        </th>
                                                        <th class="text-right" [ngClass]="{'w100': getData.feature_apply == 'Yes'}">
                                                           
                                                            <div class="th-search-acmt" [ngClass]="{'error-block': allMrpFlag == true}" *ngIf="logined_user_data.edit_master=='1'">
                                                                <mat-form-field>
                                                                    <input type="text" (ngModelChange)="clearValidation()"  matInput type="text"  class="text-right" onkeypress="return event.charCode>=48 && event.charCode<=57" placeholder="Enter Mrp"name="product_mrp" #product_mrp="ngModel" [(ngModel)]="state_data.product_mrp">
                                                                </mat-form-field>
                                                            </div>
                                                            
                                                        </th>
                                                        <th class="W60 text-center" *ngIf="logined_user_data.edit_master=='1'">
                                                            <div class="action-button">
                                                                <a  mat-icon-button  matTooltip="Save" *ngIf="logined_user_data.edit_master=='1'" (click)="updateMrp('all','','')" >
                                                                    <i class="material-icons edit">save</i>
                                                                </a>
                                                            </div>
                                                        </th>
                                                    </tr>
                                                </table>
                                            </th>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            
                            <div class="table-container pb0">
                                <div class="table-content none-shadow">
                                    <table>
                                        <tr *ngFor="let row of stateDetail;let i=index;">
                                            <td class="w30 text-center">{{i+1}}</td>
                                            <td>{{row.state_name | titlecase}}</td>
                                            <td class="padding0 w460">
                                                <table>
                                                    <ng-container *ngIf="getData.feature_apply == 'No'">
                                                        <tr>
                                                            <td class="text-right">
                                                                <div class="th-search-acmt" *ngIf="logined_user_data.edit_master!='1'">
                                                                    ₹  {{row.product_mrp}}
                                                                </div>
                                                                <div class="th-search-acmt" *ngIf="logined_user_data.edit_master=='1'">
                                                                    <mat-form-field>
                                                                        <input type="text" class="text-right"  matInput onkeypress="return event.charCode>=48 && event.charCode<=57"
                                                                        placeholder="Enter Mrp"
                                                                        [name]="'product_mrp'+i"
                                                                        #product_mrp="ngModel"
                                                                        [(ngModel)]="row.product_mrp">
                                                                    </mat-form-field>
                                                                </div>
                                                            </td>
                                                            <td class="W60 text-center" *ngIf="logined_user_data.edit_master=='1'">
                                                                <div class="action-button">
                                                                    <button  mat-icon-button  matTooltip="Save" *ngIf="logined_user_data.edit_master=='1'" [disabled]="row.product_mrp == 0" (click)="updateMrp('single',i, '')">
                                                                        <i class="material-icons edit">save</i>
                                                                    </button>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </ng-container>
                                                    <ng-container *ngIf="getData.feature_apply != 'No'">
                                                        <tr *ngFor="let row1 of row.product_feature; let j=index;">
                                                            <td class="w300">{{row1.product_size | titlecase}}</td>
                                                            <td class="w100 text-right">
                                                                <div class="th-search-acmt" *ngIf="logined_user_data.edit_master!='1'">
                                                                    {{row1.product_mrp}}
                                                                </div>
                                                                <div class="th-search-acmt" *ngIf="logined_user_data.edit_master=='1'">
                                                                    <mat-form-field>
                                                                        <input type="text" matInput class="text-right"
                                                                        [disabled]="logined_user_data.edit_master!='1'"
                                                                        onkeypress="return event.charCode>=48 && event.charCode<=57"
                                                                        placeholder="Enter Mrp"
                                                                        name="product_mrp{{i}}{{j}}"
                                                                        #product_mrp="ngModel"
                                                                        [(ngModel)]="row1.product_mrp">
                                                                    </mat-form-field>
                                                                </div>
                                                            </td>
                                                            <td class="W60 text-center" *ngIf="logined_user_data.edit_master=='1'">
                                                                <div class="action-button">
                                                                    <a  mat-icon-button  matTooltip="Save" *ngIf="logined_user_data.edit_master=='1'" (click)="updateMrp('multiple',i,j)">
                                                                        <i class="material-icons edit">save</i>
                                                                    </a>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </ng-container>
                                                </table>
                                            </td>
                                        </tr>  
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> 
        
    </div>
</div>




